SSAFY의 금융 특화 프로젝트를 시작 하기에 앞서서, 

금융 데이터 시각화와 웹 스크래핑 기능을 파악하기 위해 파이썬 라이브러리를 다수 사용해보았고 간단한 기능정리를 해보았다.

<br>

## 목차

1. [OpenDartReader](#1-opendartreader) - 한국 금융감독원 DART 시스템에서 기업 공시 정보를 간편하게 조회
2. [FinanceDataReader](#2-financedatareader) - 전 세계 주식 시장 데이터를 수집하고 분석하는 라이브러리
3. [Pandas](#3-pandas) - 데이터 조작 및 분석 라이브러리
4. [Matplotlib](#4-matplotlib) - 데이터 시각화 라이브러리
5. [Plotly](#5-plotly) - 대화형 데이터 시각화 라이브러리
6. [Streamlit](#6-streamlit) - 데이터 시각화 및 웹 애플리케이션 개발을 위한 프레임워크
7. [BeautifulSoup](#7-beautifulsoup) - HTML/XML 문서를 파싱하고 웹 스크래핑을 위한 라이브러리
8. [PyPDF2](#8-pypdf2) - PDF 파일을 읽고 텍스트를 추출하며 문서를 처리하는 라이브러리
9. [LangChain](#9-langchain) - GPT 기반 언어 모델을 활용한 문서 분석 및 질의응답 프레임워크

<br>

## 1. OpenDartReader

**OpenDartReader**는 한국 금융감독원의 전자공시시스템(DART)에서 제공하는 공시 정보를 간편하게 조회할 수 있는 라이브러리이다. 특정 기업의 사업 보고서나 재무 정보를 쉽게 가져올 수 있다.

### 장점
- **편리한 사용성** : DART API를 사용해 몇 줄의 파이썬 코드로 기업 공시 정보를 조회할 수 있다.
- **다양한 데이터 접근** : 기업의 사업 보고서, 분기보고서, 재무제표 등 다양한 정보를 조회할 수 있다.

### 단점
- **국내 기업 한정** : 한국 기업의 공시 정보만 제공되므로, 글로벌 데이터를 필요로 하는 경우 한계가 있다.
- **API 키 필요** : DART API 키가 필요하며, API 호출량에 제한이 있을 수 있다.

### 사용법
- **기업 재무제표 분석** : 특정 기업의 재무제표 데이터를 수집하고 분석하는 데 적합하다.
- **사업 보고서 분석** : 사업 보고서를 텍스트 분석이나 트렌드 분석에 활용할 수 있다.

### 예제 코드
```python
import OpenDartReader

api_key = '발급한 api key'
dart = OpenDartReader(api_key)

# 특정 기업의 사업 보고서 목록 조회
dart_list = dart.list('377480', start='2023-01-01', end='2023-08-14', kind='A', final=False)
```
<br>

## 2. FinanceDataReader

**FinanceDataReader**는 전 세계 주식 시장 데이터를 비롯한 다양한 금융 데이터를 쉽게 가져올 수 있는 라이브러리다. 한국 거래소(KRX)뿐만 아니라 미국, 일본, 유럽 등 다양한 지역의 주식 데이터를 지원한다.

### 장점
- **광범위한 데이터 커버리지** : 글로벌 주식 시장 데이터를 포함해, 환율, 원자재 가격 등 다양한 금융 데이터를 제공한다.
- **간편한 사용법** : 몇 줄의 코드로 필요한 금융 데이터를 빠르게 수집할 수 있다.

### 단점
- **데이터 업데이트 주기** : 일부 데이터는 실시간이 아니며, 업데이트 주기가 길 수 있다.
- **제한된 지표** : 제공되는 기본 지표는 제한적이어서, 추가적인 금융 분석을 위해 별도의 계산이 필요할 수 있다.

### 사용법
- **주가 분석** : 특정 종목의 주가 변동을 분석하고, 이를 시각화하여 트렌드를 파악하는 데 적합하다.
- **포트폴리오 분석** : 여러 주식의 데이터를 수집해 포트폴리오 성과를 분석할 때 유용하다.

### 예제 코드
```python
import FinanceDataReader as fdr

# 특정 종목의 주가 데이터 가져오기
df = fdr.DataReader('377480', '2023-01-01', '2023-08-14')

# 데이터 출력
print(df.head())
```

<br>

## 3. Pandas

**Pandas**는 데이터 조작 및 분석을 위한 파이썬 라이브러리다. 테이블 형태의 데이터를 다루는 데 최적화되어 있으며, 데이터 프레임(DataFrame)을 사용해 데이터를 쉽게 처리하고 분석할 수 있다. **Pandas**는 금융 데이터 분석, 통계 처리, 데이터 클렌징 등 다양한 용도로 널리 사용된다.

### 장점
- **데이터 처리 용이성** : 데이터 프레임을 사용해 대규모 데이터를 효율적으로 처리할 수 있다.
- **다양한 기능** : 결측값 처리, 데이터 필터링, 그룹화, 병합 등 데이터를 다루는 데 필요한 다양한 기능을 제공한다.
- **광범위한 통합** : 다른 데이터 시각화 라이브러리 및 분석 도구와 쉽게 통합된다.

### 단점
- **복잡한 연산** : 매우 큰 데이터셋을 처리할 때는 속도가 느려질 수 있다.
- **비교적 높은 학습 곡선** : 데이터 처리에 익숙하지 않은 사용자에게는 다소 복잡할 수 있다.

### 사용처
- **데이터 전처리** : 금융 데이터, 웹 스크래핑 결과 등의 데이터를 정제하고 분석할 때 유용하다.
- **통계 분석** : 데이터의 통계적 특성을 분석하거나, 그룹화 및 집계 연산을 수행할 때 적합하다.
- **시간 시리즈 분석** : 주가, 거래량 등 시간 기반 데이터를 분석하는 데 자주 사용된다.

### 예제 코드
```python
import pandas as pd

# 예제 데이터 생성
data = {'Date': ['2023-01-01', '2023-01-02', '2023-01-03'],
        'Close': [100, 102, 101],
        'Volume': [3000, 3100, 2900]}

# 데이터프레임 생성
df = pd.DataFrame(data)

# 데이터프레임 출력
print(df)

# 2일 이동 평균 계산
df['MA2'] = df['Close'].rolling(window=2).mean()

# 이동 평균선 출력
print(df)
```

이 코드에서 DataFrame은 표 형태의 데이터를 다루기 위한 pandas의 주요 데이터 구조이며, rolling(window=2).mean()은 2일 이동 평균을 계산한다.

Pandas는 데이터를 쉽게 조작하고 분석할 수 있는 다양한 기능을 제공하므로, 데이터 전처리와 분석 작업에서 매우 유용하다.

<br>

## MA와 Volume 계산: FinanceDataReader

이동 평균(ma)과 거래량(volume) 계산에 사용된 라이브러리는 **FinanceDataReader**이다. 이 라이브러리를 통해 주식 데이터를 가져오고, **pandas**를 사용해 간단히 이동 평균선을 계산하고, 거래량을 시각화할 수 있다.

예를 들어, 5일, 20일, 60일 이동 평균을 계산하는 방법은 다음과 같다:

```python
import FinanceDataReader as fdr
import pandas as pd

# 주가 데이터 가져오기
df = fdr.DataReader('377480', '2023-01-01', '2023-08-14')

# 이동 평균 계산
df['MA5'] = df['Close'].rolling(window=5).mean()
df['MA20'] = df['Close'].rolling(window=20).mean()
df['MA60'] = df['Close'].rolling(window=60).mean()

# 이동 평균선과 거래량 출력
print(df[['Close', 'MA5', 'MA20', 'MA60', 'Volume']].head())
```

이 코드에서 rolling(window=5).mean()는 5일 이동 평균을 계산한다.

Volume은 거래량 데이터를 나타내며, 이 역시 FinanceDataReader에서 제공된 데이터이다.

이러한 계산은 주로 pandas를 사용하여 이루어지며, 데이터를 쉽게 조작하고 분석할 수 있다.

<br>

## 4. Matplotlib

**Matplotlib**은 파이썬에서 가장 널리 사용되는 데이터 시각화 라이브러리 중 하나다. 선 그래프, 막대 그래프, 히스토그램, 산점도 등을 포함한 다양한 차트를 생성할 수 있다. 기본적인 차트 생성에서 복잡한 시각화까지 폭넓은 활용이 가능하다.

### 장점
- **유연성** : 기본적인 차트부터 복잡한 다중 그래프까지 다양한 시각화를 지원한다.
- **광범위한 커뮤니티와 문서** : 잘 정리된 문서와 큰 사용자 커뮤니티가 있어 학습 자료와 예제가 풍부하다.

### 단점
- **상대적으로 긴 코드** : 기본적인 시각화를 위한 코드가 상대적으로 길어질 수 있다.
- **기본 스타일의 한계** : 기본 스타일이 다소 구식이거나 단순할 수 있어 추가적인 스타일링이 필요할 수 있다.

### 사용처
- **기본적인 데이터 시각화** : 간단한 데이터 분석 결과를 시각적으로 표현할 때 가장 많이 사용된다.
- **다중 플롯 시각화** : 한 번에 여러 개의 그래프를 표시해야 하는 상황에 적합하다.

### 예제 코드
```python
import matplotlib.pyplot as plt

# 간단한 선 그래프 생성
x = [1, 2, 3, 4, 5]
y = [10, 15, 7, 10, 2]

plt.plot(x, y)
plt.title("Simple Line Graph")
plt.xlabel("X Axis")
plt.ylabel("Y Axis")
plt.show()
```

<br>

## 5. Plotly

**Plotly**는 대화형 데이터 시각화를 만들 수 있는 라이브러리다. 웹 브라우저에서 상호작용 가능한 차트를 생성할 수 있으며, 다양한 차트 유형과 3D 시각화도 지원한다.

### 장점
- **대화형 시각화** : 웹 브라우저에서 상호작용 가능한 차트를 만들 수 있다.
- **다양한 차트 유형** : 3D 플롯, 지도 시각화 등 고급 차트를 포함해 다양한 시각화 기능을 지원한다.
- **간편한 통합** : Plotly 차트를 쉽게 웹 애플리케이션에 통합할 수 있다.

### 단점
- **복잡한 설정** : 고급 기능을 사용할 때는 다소 복잡한 설정이 필요할 수 있다.
- **무료 버전의 제한** : 기본적인 기능은 무료지만, 기업용 기능이나 추가적인 프리미엄 서비스는 유료다.

### 사용처
- **대화형 데이터 분석** : 데이터 분석 결과를 대화형 차트로 표현해 사용자가 직접 데이터를 탐색할 수 있도록 할 때 유용하다.
- **웹 애플리케이션 통합** : Flask나 Django와 같은 웹 프레임워크와 쉽게 통합하여 대화형 시각화 기능을 추가할 수 있다.

### 예제 코드
```python
import plotly.express as px

# 예제 데이터
df = px.data.iris()

# 산점도 생성
fig = px.scatter(df, x="sepal_width", y="sepal_length", color="species",
                 title="Sepal Width vs Length")
fig.show()
```

<br>

## 6. Streamlit

**Streamlit**은 파이썬을 사용해 데이터 과학 및 금융 프로젝트를 위한 깔끔한 디자인의 웹 애플리케이션을 쉽게 만들 수 있는 프레임워크다. 대화형 시각화와 데이터 탐색이 가능하다.

### 장점
- **빠른 개발 속도** : 파이썬 코드 몇 줄로 간단하게 웹 애플리케이션을 만들 수 있다.
- **대화형 시각화** : 사용자가 입력한 데이터를 실시간으로 시각화하고, 결과를 즉시 확인할 수 있다.
- **배포 용이성** : 간단한 명령으로 웹 애플리케이션을 배포하고 공유할 수 있다.

### 단점
- **복잡한 애플리케이션의 한계** : 대규모 또는 복잡한 애플리케이션을 만들 때는 한계가 있을 수 있다.
- **성능 제한** : 서버 자원에 따라 성능이 제한될 수 있다.

### 사용처
- **데이터 시각화 대시보드** : 금융 데이터, 주가 정보 등을 실시간으로 시각화하는 대시보드를 구축할 때 유용하다.
- **프로토타입 개발** : 데이터 분석 및 모델링 결과를 빠르게 공유하고 검토할 수 있는 프로토타입을 개발할 때 적합하다.

### 예제 코드
```python
import streamlit as st
import FinanceDataReader as fdr

# Streamlit 앱 설정
st.title('주가 시각화 애플리케이션')

# 사용자 입력
stock_code = st.text_input("종목 코드를 입력하세요:", '377480')

# 주가 데이터 가져오기
df = fdr.DataReader(stock_code, '2023-01-01', '2023-08-14')

# 주가 데이터 시각화
st.line_chart(df['Close'])
```

<br>


## 7. BeautifulSoup

**BeautifulSoup**은 HTML 및 XML 문서를 파싱하고, 웹 페이지에서 원하는 데이터를 추출하는 데 사용하는 웹 스크래핑 라이브러리다. 다양한 온라인 데이터 소스를 쉽게 활용할 수 있다.

### 장점
- **강력한 파싱 기능** : HTML 및 XML 문서를 간단하게 파싱하여 원하는 요소를 쉽게 추출할 수 있다.
- **유연한 데이터 처리** : 웹 페이지 구조에 맞춰 데이터를 유연하게 추출하고 처리할 수 있다.

### 단점
- **동적 페이지 처리 어려움** : 자바스크립트로 렌더링되는 동적 웹 페이지를 처리하는 데 한계가 있다.
- **반복적 업데이트 필요** : 웹 페이지 구조가 변경되면 스크래핑 코드를 업데이트해야 한다.

### 사용법
- **뉴스 기사 스크래핑** : 특정 키워드에 대한 최신 뉴스 기사를 수집하여 트렌드 분석에 활용할 수 있다.
- **웹 데이터 수집** : 다양한 온라인 소스에서 데이터를 수집해 데이터베이스를 구축하거나 분석하는 프로젝트에 적합하다.

### 예제 코드
```python
import requests
from bs4 import BeautifulSoup

# 웹 페이지 가져오기 및 파싱
url = "https://search.naver.com/search.naver?where=news&sm=tab_jum&query=SSAFY"
response = requests.get(url)
soup = BeautifulSoup(response.text, "html.parser")

# 기사 제목 추출
article_titles = [article.get_text(strip=True) for article in soup.find_all("a", class_="news_tit")]

# 기사 제목 출력
print(article_titles)
```

<br>

## 8. PyPDF2

**PyPDF2**는 PDF 파일을 읽고 텍스트를 추출하며, 문서를 분할하고 병합하는 작업을 수행하는 데 사용하는 라이브러리다. 금융 보고서나 계약서 등 PDF 형식의 문서를 처리할 때 유용하다.

### 장점
- **다양한 기능 지원** : PDF에서 텍스트를 추출하고, 페이지를 분할하거나 문서를 병합하는 다양한 기능을 제공한다.
- **오픈 소스** : 무료로 사용할 수 있으며, 지속적으로 업데이트된다.

### 단점
- **복잡한 문서 처리의 한계** : 이미지 기반 PDF나 복잡한 레이아웃을 가진 문서에서는 텍스트 추출 정확도가 낮을 수 있다.
- **대용량 파일 처리 속도** : 대용량 PDF 파일을 처리할 때 속도가 느릴 수 있다.

### 사용법
- **금융 보고서 분석** : PDF 형식으로 제공되는 재무 보고서나 기업 공시를 텍스트로 추출해 분석하는 데 유용하다.
- **계약서 처리** : 계약서 등 법적 문서를 자동으로 처리하고 분석하는 프로젝트에 적합하다.

### 예제 코드
```python
from PyPDF2 import PdfReader

# PDF 파일에서 텍스트 추출
reader = PdfReader("path/to/pdf_file.pdf")
raw_text = "".join([page.extract_text() for page in reader.pages])

# 텍스트 출력
print(raw_text[:1000])  # 추출한 텍스트의 처음 1000자를 출력
```

<br>

## 9. LangChain

**LangChain**은 GPT와 같은 언어 모델을 활용해 문서 분석, 요약, 질의응답 등을 수행할 수 있는 프레임워크다. 대규모 문서나 데이터셋을 효율적으로 처리할 수 있다.

### 장점
- **강력한 자연어 처리** : 언어 모델을 통해 문서를 자동으로 요약하거나, 질의응답 기능을 구현할 수 있다.
- **확장성** : 다양한 언어 모델을 통합해 복잡한 문서 분석 작업을 수행할 수 있다.

### 단점
- **고비용** : 대규모 언어 모델을 사용할 경우, 계산 비용이 높을 수 있다.
- **전처리 필요** : 언어 모델의 성능을 극대화하려면 데이터의 사전 전처리가 필요할 수 있다.

### 사용법
- **문서 요약** : 금융 보고서나 연구 논문 등 대규모 문서를 요약해 핵심 정보를 추출하는 데 적합하다.
- **질의응답 시스템** : 대규모 문서나 데이터셋에서 질문을 입력하면 적절한 답변을 제공하는 시스템을 구축할 수 있다.

### 예제 코드
```python
from langchain import OpenAI
from langchain.chains import AnalyzeDocumentChain
from langchain.chains.summarize import load_summarize_chain

llm = OpenAI(temperature=0)
summary_chain = load_summarize_chain(llm, chain_type="map_reduce")
summarize_document_chain = AnalyzeDocumentChain(combine_docs_chain=summary_chain)

# 문서 요약
summary = summarize_document_chain.run(raw_text)
print(summary)
```

<br>

## 고찰 및 결론

사용해본 여러 라이브러리 중 특히 **OpenDartReader**와 **Streamlit**, **Plotly** 데이터를 활용한 차트나 그래프를 생성하고 데이터를 시각화하는 데 매우 유용했다. 

OpenDartReader를 통해 수집한 데이터를 Streamlit을 이용해 빠르고 간편하게, 그리고 디자인까지 고려하여 차트가 생성이 되는데 간결한 개발을 추구하는 나에게는 정말 마음에 드는 라이브러리였다.

그렇기에 만약 우리가 진행 할 프로젝트의 주제가 해당하는 이 라이브러리들을 사용을 할 수 있는 주제라면 어떻게 직접적으로 적용해 볼 수 있을까 하고 찾아보니, iframe을 통해 해당 라이브러리들과 React에 확장이 된다고는 한다.

이번 프로젝트에서 기회가 된다면 파이썬 서버도 직접 관리를 하며, React 코드와 연동을 하여 기존의 작업해오던 방식보다 한 단계 깊은 구조로 개발해보는 것도 좋은 경험이 될 것이다.
